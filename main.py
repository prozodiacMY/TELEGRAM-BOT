import os
from telegram import Update
from telegram.ext import ApplicationBuilder, CommandHandler, ContextType

HOROSCOPES = {
    "aries":
    "♈ ОВЕН - НОВОЛУНИЕ 25.06\nВы можете задуматься о покупке или переезде в новое жилье - например, съехать от родителей, или переехать к своему партнеру.\nЭто подходящее время, чтобы пересмотреть свои отношения с семьей, родителями. Может появиться новый член семьи.\nХорошо заняться обустройством дома, делать перестановку мебели или ремонт.\nЭто также период работы над внутренней гармонией и спокойствием в доме, семье. Разведение комнатных растений и Фэн-шуй помогут в этом.",
    "taurus":
    "♉ ТЕЛЕЦ - НОВОЛУНИЕ 25.06\nЭто время хорошо для общения: установления отношений с новыми соседями или родственниками, братьями/сестрами, расширения контактов и новых знакомств.\nВозможно получение новых практических навыков: поступление на курсы, прохождение семинаров.\nНоволуние может дать увеличение количества поездок, командировок или же смену жилья.\nТакже можете задуматься о приобретении транспортного средства и получении водительских прав, покупке нового телефона.\nЭто время для проведения переговоров, оформления документов, подписания договоров и соглашений.",
    "gemini":
    "♊ БЛИЗНЕЦЫ - НОВОЛУНИЕ 25.06\nВ это время хорошо задуматься о своем здоровье: правильном питании, занятием спортом, энергетическими практиками.\nНоволуние может принести изменения в финансовой сфере: поиск дополнительных или смена источников доходов. Например, вы решите поменять работу или же начать копить деньги.\nТакже это подходящее время для планирования бюджета: покупка или продажа недвижимости, капитальный ремонт дома.",
    "cancer":
    "♋ РАК - НОВОЛУНИЕ 25.06\nЭто время для перезагрузки, работы над собой, изменением внешности и поведения.\nВ это время вы можете захотеть: поменять привычки, заняться своим телом, спортом, здоровьем, питанием, изменить имидж, гардероб или прическу – что может способствовать новым начинаниям в личной жизни.\nМожет проявиться личная активность: я сама выбираю партнера, тему реализации.\nВремя задуматься над своими личными интересами и новыми проектами.",
    "leo":
    "♌ ЛЕВ - НОВОЛУНИЕ 25.06\nЭто время для психологического восстановления и анализа прошлого. Завершение всех процессов, подготовка к новому жизненному циклу.\nЭтот период жизни может вызвать желание побыть наедине с собой, разобраться в собственных скрытых мотивах, обратиться за консультацией к астрологу, психологу.\nДанное новолуние может говорить об иммиграции, далеких местах - когда мы скучаем по родным и близким находясь в некой изоляции или в дали от них.\nВозможно, вы задумаетесь о неофициальных доходах или появятся новые возможности подработки дистанционно.\nТакже может появиться скрытая информация, открывая для вас новые обстоятельства.\nРекомендуется в этот период заняться медитацией и другими энергетическими практиками.",
    "virgo":
    "♍ ДЕВА - НОВОЛУНИЕ 25.06\nНоволуние может принести вам знакомство с новыми людьми и расширить круг общения.\nВ это время вы можете приступить к запуску новых проектов и реализации планов с друзьями, социальными группами.\nПериод подходит для участия в общественных мероприятиях.\nТакже вы можете начать ведение блога или социальных сетей для расширения своей аудитории.",
    "libra":
    "♎ ВЕСЫ - НОВОЛУНИЕ 25.06\nНоволуние может символизировать события, связанные с карьерой, сменой направления деятельности или социальным положением (оформление брака, получение диплома, всё то, что даёт нам статус).\nПоявляется стремление укрепить свою репутацию, сменить работу, получить продвижение по службе или начать новый крупный проект.\nПодходящий момент для установления взаимоотношений с руководством для получения поддержки и протекции.\nЕсть шанс публичного признания за свою работу в виде повышения зарплаты или премии.\nПериод — для того, чтобы ставить перед собой масштабные задачи и проявлять свои лидерские качества.",
    "scorpio":
    "♏ СКОРПИОН - НОВОЛУНИЕ 25.06\nВ это время возможны такие темы как, погашение задолженностей или же получение долгожданного кредита, задумаетесь об ипотеке, начнете решать вопросы по страховым выплатам, наследству и подаркам.\nЭто хороший момент для планирования финансовой стратегии, поскольку может резко измениться финансовая ситуация вашего партнера по бизнесу, супруга или же вы решите вести совместный бюджет.\nОбратите внимание на здоровье, так как это дом кризиса, который забирает много энергии.\nЭто период для внутренних преобразований, проработки личных страхов. Поэтому вы можете захотеть обратиться к психологу или астрологу.",
    "sagittarius":
    "♐ СТРЕЛЕЦ - НОВОЛУНИЕ 25.06\nВ вашей жизни может произойти важная встреча, а существующие отношения выйти на новый уровень.\nЭто время для начала романтических свиданий, признания в чувствах и обсуждения планов с партнёром, чтобы укрепить текущие отношения или начать новые.\nПри длительных отношениях — предложение руки и сердца или оформление брака.\nНоволуние может дать возможность для проведения важных переговоров, подписания контрактов, установления партнёрских соглашений, подготовки документов и обсуждения деталей, связанных с юридическими вопросами или судебными процессами.\nХорошо заручиться поддержкой адвоката, партнёра, друзей, чтобы повысить шансы на успех и создать ощущение взаимной выгоды в отношениях.",
    "capricorn":
    "♑ КОЗЕРОГ - НОВОЛУНИЕ 25.06\nМожет измениться обстановка на работе — новые обязанности, новое руководство, отношения в коллективе, график работы, либо вы задумаетесь о смене работы.\nХорошо пройти плановое обследование организма, начать соблюдение диеты и фитнес-режима.\nВ новолуние поднимается тема заботы о близких — родителях, детях.\nКто-то может задуматься о заведении домашнего питомца.\nПересмотрите свое расписание для повышения продуктивности в жизни.",
    "aquarius":
    "♒ ВОДОЛЕЙ - НОВОЛУНИЕ 25.06\nНа новолунии возможны новые романтические отношения, влюблённость и страсть. Хочется больше проводить время с любимыми, дарить и получать подарки.\nМогут возникнуть темы, связанные с детьми: например, беременность, рождение ребёнка. \nВы принимаете активное участие в развитии детей – например, совместные поездки, хобби, определение в школу – институт и другие значимые события.\nВы можете задуматься о создании своего дела на базе своих увлечений, новом хобби и развитии творческих идей.\nЭто время благоприятно для посещения театров, концертов, активного отдыха, участия в соревнованиях, конкурсах и выставках — всем тем, что приносит радость и удовольствие!",
    "pisces":
    "♓ РЫБЫ - НОВОЛУНИЕ 25.06\nНа новолунии возможны новые романтические отношения, влюблённость и страсть. Хочется больше проводить время с любимыми, дарить и получать подарки.\nМогут возникнуть темы, связанные с детьми: например, беременность, рождение ребёнка. Вы принимаете активное участие в развитии детей – совместные поездки, хобби, обучение.\nТакже вы можете задуматься о создании собственного дела, основанного на творчестве и хобби.\nВремя для развлечений, отдыха, хобби, театров, концертов, выставок — всего того, что радует душу."
}

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    args = context.args
    if args:
        sign = args[0].lower()
        horoscope = HOROSCOPES.get(sign)
        if horoscope:
            await update.message.reply_text(horoscope)
        else:
            await update.message.reply_text(
                "Привет! Напиши /help чтобы узнать как использовать бота.")
    else:
        await update.message.reply_text(
            "Привет! Чтобы получить гороскоп, напиши /start <знак_зодиака>.\n"
            "Например: /start cancer")

async def help_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    signs = ", ".join(HOROSCOPES.keys())
    await update.message.reply_text(
        f"Доступные знаки зодиака:\n{signs}\n\n"
        "Используй команду /start <знак_зодиака>, например:\n"
        "/start cancer")

if __name__ == '__main__':
    TOKEN = os.environ['BOT_TOKEN']  # токен берётся из переменной окружения

    app = ApplicationBuilder().token(TOKEN).build()
    app.add_handler(CommandHandler("start", start))
    app.add_handler(CommandHandler("help", help_command))

    print("Бот запускается...")
    app.run_polling()
